<!DOCTYPE html>
<html>
<head>

  <!-- jspsych javascript -->
  <script src="https://unpkg.com/jspsych@7.3.4" type="text/javascript"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych-contrib/plugin-html-choice@1.0.0"></script>
  <script src="https://unpkg.com/@jspsych/extension-mouse-tracking@1.0.3"></script>
  <script src="https://unpkg.com/@jspsych/extension-mouse-tracking@1.0.3"></script>
  <script src="https://unpkg.com/@jspsych/plugin-image-button-response@1.2.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
  
  <!-- plotly javascript -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js" charset="utf-8"></script>

  <!-- custom javascript -->
  <script src="stimuli.js"></script>
  <script src="parameters.js"></script>
  <script src="functions.js"></script>

  <!-- style sheets -->
  <link rel="stylesheet" href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css"/>
  <link rel="stylesheet" href="style.css"/>

</head>
<body></body>
<script>

/* 
  Body of the Script
  Do NOT edit below this line
  See jspsyh website (https://www.jspsych.org/) for more information before editing below this line
*/

// initialze jsPsych
var jsPsych = initJsPsych({
  on_finish: build_mousetrack_fig,
  extensions: [
    { type: jsPsychExtensionMouseTracking, params: {minimum_sample_time: 0} }
  ]
});

// instructions
var instruct = {
  type: jsPsychHtmlButtonResponse,
  stimulus: construct_instr_stim,
  choices: ['Start'],
  button_html: construct_instr_buttn,
  prompt: null,
  data: {
    task: 'instructions'
  },
};

// trial
var trial = {
  type: jsPsychHtmlButtonResponse,
  stimulus: construct_trial_stim,
  choices: [jsPsych.timelineVariable('stim1'), jsPsych.timelineVariable('stim2')],
  prompt: null,
  button_html: construct_trial_bttns,
  extensions: [
    {type: jsPsychExtensionMouseTracking, params: {targets: []}}
  ],  
}

// fixations
var fixation = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '',
  choices: "NO_KEYS",
  trial_duration: 1,
}

// experimental procedure
mouse_track_procedure = {
  timeline: [instruct, fixation, trial, fixation],
  timeline_variables: stim_list,
}

// run the experiment
jsPsych.run([mouse_track_procedure]);

</script>

</html>
